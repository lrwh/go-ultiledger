syntax = "proto3";

package rpcpb;

service Node {
  rpc Hello(HelloRequest) returns (HelloResponse) {}
  rpc SubmitTx(SubmitTxRequest) returns (SubmitTxResponse) {}
  rpc Nominate(NominateRequest) returns (NominateResponse) {}
}

message HelloRequest {}

message HelloResponse {}

enum TxStatusEnum {
  REJECTED = 0;  // rejected because of some immediate error checking
  ACCEPTED = 1;  // transaction accepted but not yet confirmed by consensus
  CONFIRMED = 2; // transaction is valid and confirmed by consensus
  FAILED = 3;    // failed because of consensus 
}

message SubmitTxRequest {
  // transaction data in pb format
  bytes Data = 1;
  // digital signature of the data signed by 
  // the source account private key
  string Signature = 2;
}

message SubmitTxResponse {
  TxStatusEnum TxStatus = 1;
  // the transaction hash is only valid when the response
  // status is ACCEPTED or CONFIRMED 
  string TxHash = 2;
  // error message for REJECTED transaction
  string ErrorMessage = 3;
}

message NominateRequest {
  // nomination statement in pb format
  bytes Data = 1;
  // digital signature of the data signed by
  // the private key of peer node
  string Signature = 2;
}

message NominateResponse {}
